(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const g=document.querySelector(".word-grid"),A=document.querySelector(".current-time"),M=document.querySelector(".reset-game"),S=document.querySelector(".show-words"),i=12,$=20;let u=localStorage.getItem("showWords")==="true"||!1;S.textContent=u?"Show Words: True":"Show Words: False";let p;const T="ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜ";let c=[],v=[],C=[],w=!1;v.length===0?fetch("/word-search/data/wordlist.json").then(t=>t.json()).then(t=>{v=t.wörter.map(e=>e.toUpperCase()).filter(e=>e.length<=i),E()}):E();function E(){const t=localStorage.getItem("bestTime")||"00:00:00",e=document.querySelector(".best-time");if(e.textContent=`Best Time: ${t}`,g.children.length===0&&W(),F($),R(),u){const o=document.querySelector(".container");o.querySelectorAll(".words").forEach(s=>s.remove());const n=document.createElement("div");n.classList.add("words"),o.appendChild(n),C.forEach(s=>{const l=document.createElement("div");l.textContent=s,n.appendChild(l)})}I()}function I(){let t=Date.now();A.textContent="00:00:00";const e=()=>{const o=Date.now()-t,r=Math.floor(o/6e4),n=Math.floor(o%6e4/1e3),s=Math.floor(o%1e3/10);A.textContent=`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`,p=requestAnimationFrame(e)};p=requestAnimationFrame(e)}function W(){g.style.setProperty("--size",i),c=[];for(let t=0;t<i;t++){const e=[];for(let o=0;o<i;o++){const r=document.createElement("div");r.classList.add("cell"),r.dataset.row=t,r.dataset.col=o,g.appendChild(r),e.push(r)}c.push(e)}}function O(t){for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}}function F(t){let e=0;const o=new Set;document.querySelectorAll(".cell")[0].textContent&&(c.forEach(n=>n.forEach(s=>s.textContent="")),C=[]),O(v);for(const n of v){if(e>=t)break;if(o.has(n))continue;let s=!1,l=0;for(;!s&&l<100;){const d=Math.random()<.5?"HORIZONTAL":"VERTICAL",a=Math.floor(Math.random()*i),m=Math.floor(Math.random()*i);N(n,a,m,d)&&(P(n,a,m,d),C.push(n),o.add(n),e++,s=!0),l++}}}function N(t,e,o,r){if(r==="HORIZONTAL"){if(o+t.length>i)return!1;for(let n=0;n<t.length;n++){const s=c[e][o+n];if(s.textContent&&s.textContent!==t[n])return!1}}else{if(e+t.length>i)return!1;for(let n=0;n<t.length;n++){const s=c[e+n][o];if(s.textContent&&s.textContent!==t[n])return!1}}return!0}function P(t,e,o,r){for(let n=0;n<t.length;n++){const s=t[n];r==="HORIZONTAL"?c[e][o+n].textContent=s:c[e+n][o].textContent=s}}function R(){for(let t=0;t<i;t++)for(let e=0;e<i;e++){const o=c[t][e];o.textContent||(o.textContent=T[Math.floor(Math.random()*T.length)])}}function x(){k(),D(),B()}function k(){c.flat().forEach(t=>{t.classList.contains("found")||t.classList.remove("connected-top","connected-bottom","connected-left","connected-right")})}function D(){for(let t=0;t<i;t++)for(let e=0;e<i;e++)c[t][e].classList.contains("selected")&&(L(t,e,t-1,e,"top","bottom"),L(t,e,t+1,e,"bottom","top"),L(t,e,t,e-1,"left","right"),L(t,e,t,e+1,"right","left"))}function L(t,e,o,r,n,s){o<0||r<0||o>=i||r>=i||c[o][r].classList.contains("selected")&&(c[t][e].classList.add(`connected-${n}`),c[o][r].classList.add(`connected-${s}`))}function B(){for(let t=0;t<i;t++)for(let e=0;e<i;e++){const o=c[t][e];if(H(o),!o.classList.contains("selected"))continue;const r=j(t,e);r.top&&r.bottom&&r.left&&r.right&&(G(o),r.topLeft&&b(o,"corner-top-left"),r.topRight&&b(o,"corner-top-right"),r.bottomLeft&&b(o,"corner-bottom-left"),r.bottomRight&&b(o,"corner-bottom-right")),y(o,r.top,r.left,r.topLeft,"corner-top-left"),y(o,r.top,r.right,r.topRight,"corner-top-right"),y(o,r.bottom,r.left,r.bottomLeft,"corner-bottom-left"),y(o,r.bottom,r.right,r.bottomRight,"corner-bottom-right")}}function H(t){t.querySelectorAll(".corner").forEach(o=>o.remove())}function j(t,e){return{top:t>0&&c[t-1][e].classList.contains("selected"),bottom:t<i-1&&c[t+1][e].classList.contains("selected"),left:e>0&&c[t][e-1].classList.contains("selected"),right:e<i-1&&c[t][e+1].classList.contains("selected"),topLeft:t>0&&e>0&&c[t-1][e-1].classList.contains("selected"),topRight:t>0&&e<i-1&&c[t-1][e+1].classList.contains("selected"),bottomLeft:t<i-1&&e>0&&c[t+1][e-1].classList.contains("selected"),bottomRight:t<i-1&&e<i-1&&c[t+1][e+1].classList.contains("selected")}}function y(t,e,o,r,n){e&&o&&!r&&h(t,n)}function G(t){h(t,"corner-top-left"),h(t,"corner-top-right"),h(t,"corner-bottom-left"),h(t,"corner-bottom-right")}function h(t,e){const o=document.createElement("div");o.classList.add("corner",e),t.appendChild(o)}function b(t,e){const o=t.querySelector(`.corner.${e}`);o&&o.remove()}function Z(){const t=Math.floor(Math.random()*360),e=Math.floor(Math.random()*30)+70,o=Math.floor(Math.random()*20)+70;return{border:`hsl(${t}, ${e}%, ${o}%)`,background:`hsl(${t}, ${e}%, ${o+5}%)`}}function z(){const t=document.querySelectorAll(".cell.selected"),e=Array.from(t).map(r=>r.textContent).join(""),o=C.find(r=>r===e);if(o){const r=Array.from(t).map(l=>({row:parseInt(l.dataset.row,10),col:parseInt(l.dataset.col,10)})),n=r.every((l,d,a)=>l.row===a[0].row&&l.col===a[0].col+d),s=r.every((l,d,a)=>l.col===a[0].col&&l.row===a[0].row+d);if(n||s){const{background:l,border:d}=Z();t.forEach(f=>{f.classList.remove("selected"),f.style.setProperty("--background-color-found",l),f.style.setProperty("--border-color-found",d),f.classList.add("found")});const a=document.querySelector(".words"),m=Array.from(a.children).find(f=>f.textContent===o);m&&m.remove(),a.children.length===0&&V()}}}function V(){cancelAnimationFrame(p);const t=document.querySelector(".words");t.textContent="Congratulations! You found all words!";const e=document.querySelector(".current-time").textContent,o=localStorage.getItem("bestTime")||"00:00:00";console.log(`${e} ${o}`);const r=q(e),n=q(o);console.log(r,n),(r<n||n===0)&&(console.log(r,n),localStorage.setItem("bestTime",e),t.textContent+=` New best time: ${e}`,document.querySelector(".best-time").textContent=`Best Time: ${e}`)}function q(t){const e=t.split(":").map(Number);return e[0]*3600+e[1]*60+e[2]}g.addEventListener("mousedown",t=>{t.target.classList.contains("cell")&&(w=!0,t.target.classList.toggle("selected"),x())});g.addEventListener("mouseover",t=>{w&&t.target.classList.contains("cell")&&(t.target.classList.add("selected"),x())});document.addEventListener("mouseup",()=>{w=!1});document.addEventListener("keydown",t=>{t.key==="Enter"||t.key===" "?z():t.key==="Escape"?(c.forEach(e=>e.forEach(o=>o.classList.remove("selected"))),x()):t.key==="0"?M.click():t.key==="1"&&S.click()});M.addEventListener("click",()=>{c.forEach(t=>t.forEach(e=>e.classList.remove("selected","found"))),cancelAnimationFrame(p),E()});S.addEventListener("click",()=>{u=!u,localStorage.setItem("showWords",u);const t=document.querySelector(".words");if(t)t.remove();else{const e=document.querySelector(".container"),o=document.createElement("div");o.classList.add("words"),e.appendChild(o),C.forEach(r=>{const n=document.createElement("div");n.textContent=r,o.appendChild(n)})}S.textContent=u?"Show Words: True":"Show Words: False",c.forEach(e=>e.forEach(o=>o.classList.remove("selected","found"))),cancelAnimationFrame(p),E()});
