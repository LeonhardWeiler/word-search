(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const f=document.querySelector(".word-grid"),E=document.querySelector(".current-time"),i=12,M=20;let g;const x="ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜ";let c=[],p=[],C=[],b=!1;p.length===0?fetch("../assets/wordlist.json").then(t=>t.json()).then(t=>{p=t.wörter.map(e=>e.toUpperCase()).filter(e=>e.length<=i),L()}):L();function L(){const t=localStorage.getItem("bestTime")||"00:00:00",e=document.querySelector(".best-time");e.textContent=`Best Time: ${t}`,f.children.length===0&&$(),I(M),R();{const o=document.querySelector(".container");o.querySelectorAll(".words").forEach(s=>s.remove());const n=document.createElement("div");n.classList.add("words"),o.appendChild(n),C.forEach(s=>{const l=document.createElement("div");l.textContent=s,n.appendChild(l)})}T()}function T(){let t=Date.now();E.textContent="00:00:00";const e=()=>{const o=Date.now()-t,r=Math.floor(o/6e4),n=Math.floor(o%6e4/1e3),s=Math.floor(o%1e3/10);E.textContent=`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`,g=requestAnimationFrame(e)};g=requestAnimationFrame(e)}function $(){f.style.setProperty("--size",i),c=[];for(let t=0;t<i;t++){const e=[];for(let o=0;o<i;o++){const r=document.createElement("div");r.classList.add("cell"),r.dataset.row=t,r.dataset.col=o,f.appendChild(r),e.push(r)}c.push(e)}}function q(t){for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}}function I(t){let e=0;const o=new Set;document.querySelectorAll(".cell")[0].textContent&&(c.forEach(n=>n.forEach(s=>s.textContent="")),C=[]),q(p);for(const n of p){if(e>=t)break;if(o.has(n))continue;let s=!1,l=0;for(;!s&&l<100;){const a=Math.random()<.5?"HORIZONTAL":"VERTICAL",S=Math.floor(Math.random()*i),v=Math.floor(Math.random()*i);O(n,S,v,a)&&(N(n,S,v,a),C.push(n),o.add(n),e++,s=!0),l++}}}function O(t,e,o,r){if(r==="HORIZONTAL"){if(o+t.length>i)return!1;for(let n=0;n<t.length;n++){const s=c[e][o+n];if(s.textContent&&s.textContent!==t[n])return!1}}else{if(e+t.length>i)return!1;for(let n=0;n<t.length;n++){const s=c[e+n][o];if(s.textContent&&s.textContent!==t[n])return!1}}return!0}function N(t,e,o,r){for(let n=0;n<t.length;n++){const s=t[n];r==="HORIZONTAL"?c[e][o+n].textContent=s:c[e+n][o].textContent=s}}function R(){for(let t=0;t<i;t++)for(let e=0;e<i;e++){const o=c[t][e];o.textContent||(o.textContent=x[Math.floor(Math.random()*x.length)])}}function y(){P(),w(),F()}function P(){c.flat().forEach(t=>{t.classList.contains("found")||t.classList.remove("connected-top","connected-bottom","connected-left","connected-right")})}function w(){for(let t=0;t<i;t++)for(let e=0;e<i;e++)c[t][e].classList.contains("selected")&&(u(t,e,t-1,e,"top","bottom"),u(t,e,t+1,e,"bottom","top"),u(t,e,t,e-1,"left","right"),u(t,e,t,e+1,"right","left"))}function u(t,e,o,r,n,s){o<0||r<0||o>=i||r>=i||c[o][r].classList.contains("selected")&&(c[t][e].classList.add(`connected-${n}`),c[o][r].classList.add(`connected-${s}`))}function F(){for(let t=0;t<i;t++)for(let e=0;e<i;e++){const o=c[t][e];if(W(o),!o.classList.contains("selected"))continue;const r=D(t,e);r.top&&r.bottom&&r.left&&r.right&&(k(o),r.topLeft&&h(o,"corner-top-left"),r.topRight&&h(o,"corner-top-right"),r.bottomLeft&&h(o,"corner-bottom-left"),r.bottomRight&&h(o,"corner-bottom-right")),m(o,r.top,r.left,r.topLeft,"corner-top-left"),m(o,r.top,r.right,r.topRight,"corner-top-right"),m(o,r.bottom,r.left,r.bottomLeft,"corner-bottom-left"),m(o,r.bottom,r.right,r.bottomRight,"corner-bottom-right")}}function W(t){t.querySelectorAll(".corner").forEach(o=>o.remove())}function D(t,e){return{top:t>0&&c[t-1][e].classList.contains("selected"),bottom:t<i-1&&c[t+1][e].classList.contains("selected"),left:e>0&&c[t][e-1].classList.contains("selected"),right:e<i-1&&c[t][e+1].classList.contains("selected"),topLeft:t>0&&e>0&&c[t-1][e-1].classList.contains("selected"),topRight:t>0&&e<i-1&&c[t-1][e+1].classList.contains("selected"),bottomLeft:t<i-1&&e>0&&c[t+1][e-1].classList.contains("selected"),bottomRight:t<i-1&&e<i-1&&c[t+1][e+1].classList.contains("selected")}}function m(t,e,o,r,n){e&&o&&!r&&d(t,n)}function k(t){d(t,"corner-top-left"),d(t,"corner-top-right"),d(t,"corner-bottom-left"),d(t,"corner-bottom-right")}function d(t,e){const o=document.createElement("div");o.classList.add("corner",e),t.appendChild(o)}function h(t,e){const o=t.querySelector(`.corner.${e}`);o&&o.remove()}function j(){const t=Math.floor(Math.random()*360),e=Math.floor(Math.random()*30)+70,o=Math.floor(Math.random()*20)+70;return{border:`hsl(${t}, ${e}%, ${o}%)`,background:`hsl(${t}, ${e}%, ${o+5}%)`}}function H(){const t=document.querySelectorAll(".cell.selected"),e=Array.from(t).map(r=>r.textContent).join(""),o=C.find(r=>r===e);if(o){const{background:r,border:n}=j();t.forEach(a=>{a.classList.remove("selected"),a.style.setProperty("--background-color-found",r),a.style.setProperty("--border-color-found",n),a.classList.add("found")});const s=document.querySelector(".words"),l=Array.from(s.children).find(a=>a.textContent===o);l&&l.remove(),s.children.length===0&&Z()}}function Z(){cancelAnimationFrame(g);const t=document.querySelector(".words");t.textContent="Congratulations! You found all words!";const e=document.querySelector(".current-time").textContent,o=localStorage.getItem("bestTime")||"00:00:00";console.log(`${e} ${o}`);const r=A(e),n=A(o);console.log(r,n),(r<n||n===0)&&(console.log(r,n),localStorage.setItem("bestTime",e),t.textContent+=` New best time: ${e}`,document.querySelector(".best-time").textContent=`Best Time: ${e}`)}function A(t){const e=t.split(":").map(Number);return e[0]*3600+e[1]*60+e[2]}f.addEventListener("mousedown",t=>{t.target.classList.contains("cell")&&(b=!0,t.target.classList.toggle("selected"),y())});f.addEventListener("mouseover",t=>{b&&t.target.classList.contains("cell")&&(t.target.classList.add("selected"),y())});document.addEventListener("mouseup",()=>{b=!1});document.addEventListener("keydown",t=>{t.key==="Enter"||t.key===" "?H():t.key==="Escape"?(c.forEach(e=>e.forEach(o=>o.classList.remove("selected"))),y()):t.key==="0"&&(c.forEach(e=>e.forEach(o=>{o.classList.remove("selected","found")})),cancelAnimationFrame(g),L())});
